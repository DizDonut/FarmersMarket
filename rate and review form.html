<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>Rate and Review</title>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- CSS for Star Rating -->
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-star-rating/4.0.1/css/star-rating.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-star-rating/4.0.1/css/theme-krajee-fa.css" />
</head>
<body>
  <div class="container">
    <!-- Jumbotron -->
    <div class="jumbotron">
      <h1 class="text-center">Post A Review!</h1>
    </div>
    <!-- Log-In Panel-->
    <div class="container">
      <div class="col-md-3">
        <div class="panel panel-default" id="signIn">
          <div class="panel-heading">Already a member? Log in:
          </div>
          <div class="panel-body">
            <form>
              <div class="form-group">
                <input type="text" class="form-control" id="existUser-input" name="username" value="" placeholder="username or email">
              </div>
              <div class="form-group">
                <input type="password" class="form-control" id="password" name="password" placeholder="password">
              </div>
              <div>
                <button class="btn btn-primary" id="login" type="submit">Submit</button>
                <p class="text-center">or</p>
                <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
              </div>
          </form>
          </div>
        </div>
      </div>
      <!-- New Sign-Up Panel-->
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">New Member Sign-Up</h3>
          </div>
          <div class="panel-body">
          <form role="form">
          <div class="form-group">
            <label for="email" class=" control-label">Email</label>
             <input type="email" class="form-control" id="email-input" name="email" placeholder="Email Address">
          </div>
          <div class="form-group">
            <label for="userName" class=" control-label">User Name</label>
            <input type="text" class="form-control" id="user-input" name="username" placeholder="User Name">
          </div>
          <div class="form-group">
          <label for="password" class=" control-label">Password</label>
          <input type="password" class="form-control" id="password-input" name="passwd" placeholder="Password">
          </div>
          <div class="form-group">
           <label for="zip-input" class="control-label">Your ZIP Code</label>
               <input type="text" class="form-control"  id="zip-input" name="zip" placeholder="5-digit ZIP">
          </div>
          <button class="btn btn-default" id="add-user" type="submit">Submit</button>
        </form>
          </div>
        </div>
        </div>
        <!--Rate and Review Panel-->
        <div class="col-md-4">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Rate and Comment</h3>
            </div>
          <div class="panel-body">
            <form role="form">
          <div class="form-group">
            <label for="comment-input">What market did you visit?</label>
            <input type "text" class="form-control" id="market-input">
          </div>
          <div class="form-group">
          <label for="comment-input">Describe your experience:</label>
            <textarea class="form-control" id="comment-input" rows="4"></textarea>
          </div>
            <label for="input-7-xs" class="control-label">Rating</label>
            <input id="input-7-xs" class="rating rating-loading" value="1" data-min="0" data-max="5" data-step="0.5" data-size="xs"><hr/>
            <button class="btn btn-default" id="add-rating" type="submit">Submit</button>
                </form>
          </div>
          </div>
        </div>
    </div>
  </div>
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-star-rating/4.0.1/js/star-rating.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"</script>

<!-- LINK TO Google Sign-In HERE -->
<!-- <script src="https://apis.google.com/js/platform.js" async defer></script>
<meta name="google-signin-client_id" content="1063847826407-23nfj5j5jhq92n2kf3ke9pmrfnoh5tdh.apps.googleusercontent.com"> -->
  <!-- LINK TO FIREBASE GOES HERE -->
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
  <!-- Script -->
  <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyCDNuiRUIsLtsdu6FLuNB6uOwL3MiXXF3U",
      authDomain: "group-project-43415.firebaseapp.com",
      databaseURL: "https://group-project-43415.firebaseio.com",
      projectId: "group-project-43415",
      storageBucket: "group-project-43415.appspot.com",
      messagingSenderId: "1063847826407"
    };
    firebase.initializeApp(config);
  </script>
  <!-- Create a variable to reference the database -->
  <script>
var database = firebase.database();
    // Initial Values
    var email = "";
    var username = "";
    var password = "";
    var zip = "";
    var mkName = "";
    var comment = "";
    var rating = "";
    // Capture Button Click to add user
    $("#add-user").on("click", function() {
      // Don't refresh the page!
      event.preventDefault();
      // Code in the logic for storing and retrieving the most recent user.
      // Don't forget to provide initial data to your Firebase database.
      email = $("#email-input").val().trim();
      username = $("#user-input").val().trim();
      password = $("#password-input").val().trim();
      zip = $("#zip-input").val().trim();

      database.ref().set({
        email: email,
        username: username,
        password: password,
        zip: zip
      });
    });
    // Capture Button Click to add rating
    $("#add-rating").on("click", function() {
      // Don't refresh the page!
      event.preventDefault();
      // Code in the logic for storing and retrieving the most recent user.
      // Don't forget to provide initial data to your Firebase database.
      mkName = $("#market-input").val().trim();
      comment = $("#comment-input").val().trim();
      rating = $("#input-7-xs").val().trim();

      database.ref().set({
        mkName: mkName,
        comment: comment,
        rating: rating
    });
  // Firebase watcher + initial loader HINT: .on("value")
    database.ref().on("value", function(snapshot)
    {
      // Log everything that's coming out of snapshot
      console.log(snapshot.val());
      console.log(snapshot.val().email);
      console.log(snapshot.val().username);
      console.log(snapshot.val().password);
      console.log(snapshot.val().zip);
      console.log(snapshot.val().mkName);
      console.log(snapshot.val().comment);
      console.log(snapshot.val().rating);
})
});

    }, function(errorObject) {
      console.log("Errors handled: " + errorObject.code);

  });
  </script>
    function onSuccess(googleUser) {
      console.log('Logged in as: ' + googleUser.getBasicProfile().getName());
    }
    function onFailure(error) {
      console.log(error);
    }
    //function renderButton() {
    //   gapi.signin2.render('my-signin2', {
    //     'scope': 'profile email',
    //     'width': 240,
    //     'height': 50,
    //     'longtitle': true,
    //     'theme': 'dark',
    //     'onsuccess': onSuccess,
    //     'onfailure': onFailure
    //   });
    // }
  <!-- <script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script> -->
</body>
</html>
